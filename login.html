

<h2>学生登录</h2>

<div class="row">
	<div class="col-xs-6">
		
		<form id="login">
			<div class="form-group">
				<label>学号</label>
				<input type="text" name="UserCode" class="form-control">
			</div>
			<div class="form-group">
				<label>密码</label>
				<input type="password" name="UserPwd" class="form-control">
			</div>
			<button type="submit" class="btn btn-primary btn-lg">登录</button>		
		</form>
		
	</div>
</div>


<script>
(function() {
	var client = global.client;
	
    $('#login').on('submit', function(ev) {
		global.profile = null;
    	var $form = $(this);
    	ev.preventDefault();
    	// 进入登录页面
		client.get('/student/', {}, {}, function(err, res, body) {
		    // 提交登录信息
		    client.cookie['LogonNumber'] = '';
		    client.post('/student/logon.asp', $form.getFormData(),
		    {}, function(err, res, body){
		        var success = /welcome/.test(body);
		        if (success) {
		        	$frame.load('profile.html');
		        } else {
		        	alert('登录信息错误');
		        }
		    });
		});
    	return false;
    });
})();
</script>