<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>WYU XStu</title>

<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="lib/bootstrap/css/bootstrap-theme.min.css">
</head>
<body>
<style scoped>
	.container {
		width: 100%;
		min-width: 0;
		max-width: 1140px;
	}
	
	#frame {
		margin-top: 70px;
	}
	
	table thead th {
		padding-bottom: 5px;
	}
</style>

<nav id="nav" class="navbar navbar-inverse navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
			    <span class="icon-bar"></span>
				<span class="icon-bar"></span>
			    <span class="icon-bar"></span>
		    </button>
			<a href="login" class="navbar-brand">XStu</a>
		</div>
		
		<div class="collapse navbar-collapse navbar-ex1-collapse">
			<ul class="nav navbar-nav">
				<li>
					<a href="profile">学生学籍</a>
				</li>
				<li>
					<a href="courses">课程表</a>
				</li>
				<li>
					<a href="scores">学分成绩</a>
				</li>
			</ul>
		</div>
	</div>
</nav>

<div id="frame" class="container"></div>

<script src="lib/underscore-min.js"></script>
<script src="lib/jquery.min.js"></script>
<script src="lib/form.js"></script>
<script src="lib/bootstrap/js/bootstrap.min.js"></script>
<script>
$.fn.xLoad = function(href, callback) {
	$nav.find('a[href]').parent().removeClass('active');
	$nav.find('a[href="'+ href +'"]').parent().addClass('active');
	return $(this).each(function(i, el) {
		$(el).load('pages/'+ href +'.html', callback || function() {});
	});
}
$.fn.xToggleLoading = function(on) {
	var $btn = $(this);
	$btn.data('x-original') || $btn.data('x-original', $btn.text());
	if (on) {
		$btn.addClass('disabled').text($btn.data('x-loading'));
	} else {
		$btn.text($btn.data('x-original')).removeClass('disabled');
	}
}
</script>
<script>
global.Client = require('./lib/Client.class');
global.profile = null;
global.courses = null;

var $frame = $('#frame'), $nav = $('#nav');
$nav.delegate('a[href]', 'click', function() {
	$frame.xLoad($(this).attr('href'));
	return false;
});
$frame.xLoad('login');
</script>
</body>
</html>